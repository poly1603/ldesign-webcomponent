<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¡ç‰‡æ¨¡å¼å’Œå—æ§æ¨¡å¼æµ‹è¯•</title>
    <script type="module" src="./dist/ldesign/ldesign.esm.js"></script>
    <link rel="stylesheet" href="./dist/ldesign/ldesign.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 8px 16px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        button:hover {
            border-color: #40a9ff;
            color: #40a9ff;
        }
        
        button.primary {
            background: #1890ff;
            color: white;
            border-color: #1890ff;
        }
        
        button.primary:hover {
            background: #40a9ff;
            border-color: #40a9ff;
        }
        
        .status {
            padding: 10px;
            background: #f0f2f5;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 14px;
            color: #595959;
        }
        
        .test-description {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 15px;
            color: #0050b3;
            font-size: 14px;
        }
        
        /* è°ƒè¯•ç”¨æ ·å¼ */
        .debug-info {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #fff;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            padding: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            max-width: 300px;
            font-size: 12px;
        }
        
        .debug-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        code {
            background: #f0f2f5;
            padding: 2px 4px;
            border-radius: 2px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>å¡ç‰‡æ¨¡å¼å’Œå—æ§æ¨¡å¼æµ‹è¯•</h1>
        
        <!-- å¡ç‰‡æ¨¡å¼æµ‹è¯• -->
        <div class="section">
            <h2 class="section-title">å¡ç‰‡æ¨¡å¼</h2>
            <div class="test-description">
                ğŸ“¦ å¡ç‰‡æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªé¢æ¿åº”è¯¥ç‹¬ç«‹æ˜¾ç¤ºä¸ºå¡ç‰‡æ ·å¼ï¼Œæœ‰ç‹¬ç«‹çš„è¾¹æ¡†å’Œé˜´å½±
            </div>
            
            <ldesign-collapse mode="card">
                <ldesign-collapse-panel name="card1" title="å¡ç‰‡ 1">
                    <div style="padding: 16px;">
                        <p>è¿™æ˜¯å¡ç‰‡æ¨¡å¼çš„ç¬¬ä¸€ä¸ªé¢æ¿ã€‚</p>
                        <p>æ¯ä¸ªé¢æ¿åº”è¯¥æœ‰ç‹¬ç«‹çš„è¾¹æ¡†å’Œåœ†è§’ã€‚</p>
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="card2" title="å¡ç‰‡ 2">
                    <div style="padding: 16px;">
                        <p>è¿™æ˜¯å¡ç‰‡æ¨¡å¼çš„ç¬¬äºŒä¸ªé¢æ¿ã€‚</p>
                        <p>é¼ æ ‡æ‚¬åœæ—¶åº”è¯¥æœ‰é˜´å½±æ•ˆæœã€‚</p>
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="card3" title="å¡ç‰‡ 3">
                    <div style="padding: 16px;">
                        <p>è¿™æ˜¯å¡ç‰‡æ¨¡å¼çš„ç¬¬ä¸‰ä¸ªé¢æ¿ã€‚</p>
                        <p>å±•å¼€æ—¶åº”è¯¥æœ‰æ›´æ˜æ˜¾çš„é˜´å½±ã€‚</p>
                    </div>
                </ldesign-collapse-panel>
            </ldesign-collapse>
        </div>
        
        <!-- å—æ§æ¨¡å¼æµ‹è¯• -->
        <div class="section">
            <h2 class="section-title">å—æ§æ¨¡å¼</h2>
            <div class="test-description">
                ğŸ® é€šè¿‡ value å±æ€§æ§åˆ¶å±•å¼€çš„é¢æ¿ï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥æ§åˆ¶ç‰¹å®šé¢æ¿çš„å±•å¼€/æ”¶èµ·
            </div>
            
            <div class="controls">
                <button onclick="setControlledValue(['panel1'])">åªå±•å¼€é¢æ¿1</button>
                <button onclick="setControlledValue(['panel2'])">åªå±•å¼€é¢æ¿2</button>
                <button onclick="setControlledValue(['panel1', 'panel2'])">å±•å¼€1å’Œ2</button>
                <button onclick="setControlledValue([])">å…¨éƒ¨æ”¶èµ·</button>
                <button onclick="setControlledValue(['panel1', 'panel2', 'panel3'])">å…¨éƒ¨å±•å¼€</button>
            </div>
            
            <ldesign-collapse id="controlledCollapse" value="[]">
                <ldesign-collapse-panel name="panel1" title="å—æ§é¢æ¿ 1">
                    <div style="padding: 16px;">
                        å—æ§æ¨¡å¼ä¸‹ï¼Œå±•å¼€çŠ¶æ€ç”± value å±æ€§æ§åˆ¶ã€‚
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="panel2" title="å—æ§é¢æ¿ 2">
                    <div style="padding: 16px;">
                        ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¯ä»¥æ§åˆ¶é¢æ¿çš„å±•å¼€çŠ¶æ€ã€‚
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="panel3" title="å—æ§é¢æ¿ 3">
                    <div style="padding: 16px;">
                        ä¹Ÿå¯ä»¥åŒæ—¶å±•å¼€å¤šä¸ªé¢æ¿ã€‚
                    </div>
                </ldesign-collapse-panel>
            </ldesign-collapse>
            
            <div class="status" id="controlledStatus">
                å½“å‰å±•å¼€çš„é¢æ¿ï¼šæ— 
            </div>
        </div>
        
        <!-- æ··åˆæµ‹è¯•ï¼šå¡ç‰‡æ¨¡å¼ + å—æ§æ¨¡å¼ -->
        <div class="section">
            <h2 class="section-title">å¡ç‰‡æ¨¡å¼ + å—æ§æ¨¡å¼</h2>
            <div class="test-description">
                ğŸ¯ åŒæ—¶ä½¿ç”¨å¡ç‰‡æ ·å¼å’Œå—æ§æ¨¡å¼
            </div>
            
            <div class="controls">
                <button onclick="setMixedValue(['mix1'])">å±•å¼€ç¬¬ä¸€ä¸ª</button>
                <button onclick="setMixedValue(['mix2'])">å±•å¼€ç¬¬äºŒä¸ª</button>
                <button onclick="setMixedValue(['mix1', 'mix2'])">å…¨éƒ¨å±•å¼€</button>
                <button onclick="setMixedValue([])">å…¨éƒ¨æ”¶èµ·</button>
            </div>
            
            <ldesign-collapse id="mixedCollapse" mode="card" value="[]">
                <ldesign-collapse-panel name="mix1" title="æ··åˆæ¨¡å¼å¡ç‰‡ 1">
                    <div style="padding: 16px;">
                        è¿™ä¸ªé¢æ¿åŒæ—¶ä½¿ç”¨äº†å¡ç‰‡æ ·å¼å’Œå—æ§æ¨¡å¼ã€‚
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="mix2" title="æ··åˆæ¨¡å¼å¡ç‰‡ 2">
                    <div style="padding: 16px;">
                        æ ·å¼å’ŒåŠŸèƒ½åº”è¯¥éƒ½æ­£å¸¸å·¥ä½œã€‚
                    </div>
                </ldesign-collapse-panel>
            </ldesign-collapse>
        </div>
    </div>
    
    <div class="debug-info">
        <div class="debug-title">è°ƒè¯•ä¿¡æ¯</div>
        <div id="debugContent">ç­‰å¾…æ“ä½œ...</div>
    </div>
    
    <script>
        // å—æ§æ¨¡å¼è®¾ç½®å€¼
        function setControlledValue(panels) {
            const collapse = document.getElementById('controlledCollapse');
            collapse.setAttribute('value', JSON.stringify(panels));
            updateControlledStatus(panels);
            updateDebug(`è®¾ç½®å—æ§å€¼: ${JSON.stringify(panels)}`);
        }
        
        // æ··åˆæ¨¡å¼è®¾ç½®å€¼
        function setMixedValue(panels) {
            const collapse = document.getElementById('mixedCollapse');
            collapse.setAttribute('value', JSON.stringify(panels));
            updateDebug(`è®¾ç½®æ··åˆæ¨¡å¼å€¼: ${JSON.stringify(panels)}`);
        }
        
        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateControlledStatus(panels) {
            const status = document.getElementById('controlledStatus');
            if (panels.length === 0) {
                status.textContent = 'å½“å‰å±•å¼€çš„é¢æ¿ï¼šæ— ';
            } else {
                status.textContent = `å½“å‰å±•å¼€çš„é¢æ¿ï¼š${panels.join(', ')}`;
            }
        }
        
        // æ›´æ–°è°ƒè¯•ä¿¡æ¯
        function updateDebug(message) {
            const debug = document.getElementById('debugContent');
            const time = new Date().toLocaleTimeString('zh-CN');
            debug.innerHTML = `<strong>[${time}]</strong><br>${message}`;
        }
        
        // ç›‘å¬å˜åŒ–äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            // ç›‘å¬å—æ§æ¨¡å¼çš„å˜åŒ–
            const controlledCollapse = document.getElementById('controlledCollapse');
            controlledCollapse.addEventListener('change', (e) => {
                console.log('å—æ§æ¨¡å¼å˜åŒ–:', e.detail);
                updateControlledStatus(e.detail.openPanels || []);
                updateDebug(`å˜åŒ–äº‹ä»¶: ${JSON.stringify(e.detail)}`);
            });
            
            // ç›‘å¬æ··åˆæ¨¡å¼çš„å˜åŒ–
            const mixedCollapse = document.getElementById('mixedCollapse');
            mixedCollapse.addEventListener('change', (e) => {
                console.log('æ··åˆæ¨¡å¼å˜åŒ–:', e.detail);
                updateDebug(`æ··åˆæ¨¡å¼å˜åŒ–: ${JSON.stringify(e.detail)}`);
            });
            
            // æ£€æŸ¥å…ƒç´ æ˜¯å¦æ­£ç¡®æ³¨å†Œ
            setTimeout(() => {
                const collapses = document.querySelectorAll('ldesign-collapse');
                updateDebug(`æ‰¾åˆ° ${collapses.length} ä¸ªæŠ˜å ç»„ä»¶`);
                
                // æ£€æŸ¥æ˜¯å¦æœ‰å¡ç‰‡æ ·å¼ç±»
                collapses.forEach((collapse, index) => {
                    const hasCardClass = collapse.classList.contains('ldesign-collapse--card');
                    const mode = collapse.getAttribute('mode');
                    console.log(`ç»„ä»¶ ${index + 1}: mode="${mode}", hasCardClass=${hasCardClass}`);
                });
            }, 100);
        });
    </script>
</body>
</html>