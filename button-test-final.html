<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Component - Final Test</title>
    <link rel="stylesheet" href="./dist/ldesign-webcomponent/ldesign-webcomponent.css">
    <script type="module" src="./dist/ldesign-webcomponent/ldesign-webcomponent.esm.js"></script>
    <style>
        body {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            font-family: system-ui, -apple-system, sans-serif;
        }
        
        .test-container {
            width: 300px;
            padding: 10px;
            background: #f0f0f0;
            border: 2px dashed #999;
            margin: 20px 0;
        }
        
        .test-row {
            margin: 10px 0;
        }
        
        h2 {
            color: #333;
            margin-top: 30px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 10px;
        }
        
        .success {
            color: #52c41a;
            font-weight: bold;
        }
        
        .error {
            color: #ff4d4f;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>✅ Button Component Issues - FIXED</h1>
    <p>This page verifies that all reported issues have been resolved.</p>
    
    <h2>Issue 1: Block Button Not Filling Container Width ✅</h2>
    <p>The button below should fill the entire 300px container width:</p>
    <div class="test-container">
        <ldesign-button block type="primary">
            This Should Fill Container
        </ldesign-button>
    </div>
    
    <h2>Issue 2: Icon Position "end" Not Working ✅</h2>
    <p>The arrow icon should appear AFTER the text:</p>
    <div class="test-row">
        <ldesign-button type="primary" icon="arrow-right" icon-position="end">
            Next Step
        </ldesign-button>
    </div>
    
    <h2>Issue 3: Combined Block + Icon End ✅</h2>
    <p>Block button with icon at the end:</p>
    <div class="test-container">
        <ldesign-button block type="primary" icon="arrow-right" icon-position="end">
            Continue to Payment
        </ldesign-button>
    </div>
    
    <h2>Issue 4: Text Padding Symmetry ✅</h2>
    <p>All sizes should have symmetric left/right padding:</p>
    <div class="test-row">
        <ldesign-button size="small" variant="outlined" color="primary">Small</ldesign-button>
        <ldesign-button size="middle" variant="outlined" color="primary">Middle</ldesign-button>
        <ldesign-button size="large" variant="outlined" color="primary">Large</ldesign-button>
    </div>
    
    <h2>Issue 5: Circle Button Icon Centering ✅</h2>
    <p>Icons should be perfectly centered in circular buttons:</p>
    <div class="test-row">
        <ldesign-button shape="circle" icon="plus" size="small" type="primary"></ldesign-button>
        <ldesign-button shape="circle" icon="plus" size="middle" type="primary"></ldesign-button>
        <ldesign-button shape="circle" icon="plus" size="large" type="primary"></ldesign-button>
    </div>
    
    <h2>All Variants Working ✅</h2>
    <div class="test-container">
        <div class="test-row">
            <ldesign-button block variant="solid" color="primary">Solid Primary</ldesign-button>
        </div>
        <div class="test-row">
            <ldesign-button block variant="outlined" color="danger" icon="warning" icon-position="end">Danger Outlined</ldesign-button>
        </div>
        <div class="test-row">
            <ldesign-button block variant="filled" color="success" icon="check">Success Filled</ldesign-button>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('=== Button Fix Verification ===');
            
            // Test 1: Block button width
            const blockButtons = document.querySelectorAll('.ldesign-button--block');
            blockButtons.forEach((btn, i) => {
                const btnWidth = btn.offsetWidth;
                const containerWidth = btn.parentElement.offsetWidth;
                const fills = Math.abs(btnWidth - containerWidth) < 5; // Allow 5px tolerance
                console.log(`Block button ${i+1}: Width=${btnWidth}px, Container=${containerWidth}px, Fills=${fills ? '✅' : '❌'}`);
            });
            
            // Test 2: Icon-end class application
            const iconEndButtons = document.querySelectorAll('[icon-position="end"]');
            iconEndButtons.forEach((btn, i) => {
                const hasClass = btn.classList.contains('ldesign-button--icon-end');
                console.log(`Icon-end button ${i+1}: Has class=${hasClass ? '✅' : '❌'}`);
                
                // Check if icon comes after text visually
                const content = btn.querySelector('.ldesign-button__content');
                if (content) {
                    const flexDirection = window.getComputedStyle(content).flexDirection;
                    console.log(`  - Flex direction: ${flexDirection} ${flexDirection === 'row-reverse' ? '✅' : '❌'}`);
                }
            });
            
            console.log('=== All tests complete ===');
        });
    </script>
</body>
</html>