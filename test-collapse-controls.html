<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ˜å é¢æ¿æ§åˆ¶æµ‹è¯•</title>
    <script type="module" src="./dist/ldesign-webcomponent/ldesign-webcomponent.esm.js"></script>
    <link rel="stylesheet" href="./dist/ldesign-webcomponent/ldesign-webcomponent.css">
    <style>
        body {
            padding: 40px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f5f7fa;
        }
        .demo-section {
            margin-bottom: 40px;
            background: white;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        }
        h2 {
            margin-top: 0;
            color: #1f2329;
            font-size: 20px;
            margin-bottom: 20px;
        }
        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }
        button {
            padding: 8px 16px;
            border: 1px solid #d9d9d9;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        button:hover {
            border-color: #40a9ff;
            color: #40a9ff;
        }
        button:active {
            background: #f0f0f0;
        }
        .test-box {
            border: 1px solid #e5e6eb;
            padding: 20px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .drag-handle {
            cursor: move;
            color: #999;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="demo-section">
        <h2>ğŸ“ åŸºç¡€å±•å¼€/æ”¶èµ·æ§åˆ¶</h2>
        
        <div class="controls">
            <button onclick="expandAll('collapse1')">å±•å¼€å…¨éƒ¨</button>
            <button onclick="collapseAll('collapse1')">æ”¶èµ·å…¨éƒ¨</button>
            <button onclick="togglePanel('collapse1', 'panel2')">åˆ‡æ¢é¢æ¿2</button>
            <button onclick="getOpenPanels('collapse1')">è·å–å±•å¼€çš„é¢æ¿</button>
        </div>
        
        <ldesign-collapse id="collapse1">
            <ldesign-collapse-panel header="é¢æ¿ 1" name="panel1">
                è¿™æ˜¯é¢æ¿ 1 çš„å†…å®¹
            </ldesign-collapse-panel>
            <ldesign-collapse-panel header="é¢æ¿ 2" name="panel2">
                è¿™æ˜¯é¢æ¿ 2 çš„å†…å®¹
            </ldesign-collapse-panel>
            <ldesign-collapse-panel header="é¢æ¿ 3" name="panel3">
                è¿™æ˜¯é¢æ¿ 3 çš„å†…å®¹
            </ldesign-collapse-panel>
            <ldesign-collapse-panel header="é¢æ¿ 4" name="panel4">
                è¿™æ˜¯é¢æ¿ 4 çš„å†…å®¹
            </ldesign-collapse-panel>
        </ldesign-collapse>
        
        <div id="status1" style="margin-top: 20px; padding: 10px; background: #f5f7fa; border-radius: 4px;">
            çŠ¶æ€: ç­‰å¾…æ“ä½œ...
        </div>
    </div>

    <div class="demo-section">
        <h2>ğŸ”„ æ‹–æ‹½æ’åºæµ‹è¯•</h2>
        
        <div class="controls">
            <button onclick="toggleSortable()">åˆ‡æ¢æ‹–æ‹½æ¨¡å¼</button>
            <button onclick="expandAll('collapse2')">å±•å¼€å…¨éƒ¨</button>
            <button onclick="collapseAll('collapse2')">æ”¶èµ·å…¨éƒ¨</button>
        </div>
        
        <ldesign-collapse id="collapse2" sortable>
            <ldesign-collapse-panel header="ğŸ“ å¯æ‹–æ‹½é¢æ¿ A" name="panelA">
                <span class="drag-handle">â˜°</span>å†…å®¹ A - æ‹–åŠ¨æ ‡é¢˜æ æ¥é‡æ–°æ’åº
            </ldesign-collapse-panel>
            <ldesign-collapse-panel header="ğŸ“Š å¯æ‹–æ‹½é¢æ¿ B" name="panelB">
                <span class="drag-handle">â˜°</span>å†…å®¹ B - æ‹–åŠ¨æ ‡é¢˜æ æ¥é‡æ–°æ’åº
            </ldesign-collapse-panel>
            <ldesign-collapse-panel header="ğŸ“ˆ å¯æ‹–æ‹½é¢æ¿ C" name="panelC">
                <span class="drag-handle">â˜°</span>å†…å®¹ C - æ‹–åŠ¨æ ‡é¢˜æ æ¥é‡æ–°æ’åº
            </ldesign-collapse-panel>
            <ldesign-collapse-panel header="ğŸ“‰ å¯æ‹–æ‹½é¢æ¿ D" name="panelD">
                <span class="drag-handle">â˜°</span>å†…å®¹ D - æ‹–åŠ¨æ ‡é¢˜æ æ¥é‡æ–°æ’åº
            </ldesign-collapse-panel>
        </ldesign-collapse>
        
        <div id="status2" style="margin-top: 20px; padding: 10px; background: #f5f7fa; border-radius: 4px;">
            æ‹–æ‹½æ¨¡å¼: å·²å¯ç”¨
        </div>
    </div>

    <div class="demo-section">
        <h2>ğŸŒ² åµŒå¥—æŠ˜å é¢æ¿æµ‹è¯•</h2>
        
        <div class="controls">
            <button onclick="expandAll('collapse3')">å±•å¼€å¤–å±‚å…¨éƒ¨</button>
            <button onclick="collapseAll('collapse3')">æ”¶èµ·å¤–å±‚å…¨éƒ¨</button>
        </div>
        
        <ldesign-collapse id="collapse3">
            <ldesign-collapse-panel header="å¤–å±‚é¢æ¿ 1" name="outer1">
                <p>è¿™æ˜¯å¤–å±‚é¢æ¿ 1 çš„å†…å®¹</p>
                
                <ldesign-collapse id="nested1">
                    <ldesign-collapse-panel header="å†…å±‚é¢æ¿ 1-1" name="inner1-1">
                        å†…å±‚å†…å®¹ 1-1
                    </ldesign-collapse-panel>
                    <ldesign-collapse-panel header="å†…å±‚é¢æ¿ 1-2" name="inner1-2">
                        å†…å±‚å†…å®¹ 1-2
                    </ldesign-collapse-panel>
                </ldesign-collapse>
            </ldesign-collapse-panel>
            
            <ldesign-collapse-panel header="å¤–å±‚é¢æ¿ 2" name="outer2">
                <p>è¿™æ˜¯å¤–å±‚é¢æ¿ 2 çš„å†…å®¹</p>
                
                <ldesign-collapse id="nested2" default-value='["inner2-1"]'>
                    <ldesign-collapse-panel header="å†…å±‚é¢æ¿ 2-1" name="inner2-1">
                        å†…å±‚å†…å®¹ 2-1ï¼ˆé»˜è®¤å±•å¼€ï¼‰
                    </ldesign-collapse-panel>
                    <ldesign-collapse-panel header="å†…å±‚é¢æ¿ 2-2" name="inner2-2">
                        å†…å±‚å†…å®¹ 2-2
                    </ldesign-collapse-panel>
                    <ldesign-collapse-panel header="å†…å±‚é¢æ¿ 2-3" name="inner2-3">
                        å†…å±‚å†…å®¹ 2-3
                    </ldesign-collapse-panel>
                </ldesign-collapse>
            </ldesign-collapse-panel>
            
            <ldesign-collapse-panel header="å¤–å±‚é¢æ¿ 3ï¼ˆæ— åµŒå¥—ï¼‰" name="outer3">
                <p>è¿™æ˜¯å¤–å±‚é¢æ¿ 3 çš„å†…å®¹ï¼Œæ²¡æœ‰åµŒå¥—çš„å­é¢æ¿</p>
            </ldesign-collapse-panel>
        </ldesign-collapse>
        
        <div id="status3" style="margin-top: 20px; padding: 10px; background: #f5f7fa; border-radius: 4px;">
            è¯´æ˜: å±•å¼€å¤–å±‚é¢æ¿æ—¶ï¼Œå†…å±‚é¢æ¿åº”ä¿æŒé»˜è®¤çŠ¶æ€ï¼ˆä¸è‡ªåŠ¨å…¨éƒ¨å±•å¼€ï¼‰
        </div>
    </div>

    <script>
        // å±•å¼€å…¨éƒ¨
        async function expandAll(collapseId) {
            const collapse = document.getElementById(collapseId);
            if (collapse && collapse.expandAll) {
                await collapse.expandAll();
                updateStatus(collapseId, 'å·²å±•å¼€å…¨éƒ¨é¢æ¿');
            }
        }
        
        // æ”¶èµ·å…¨éƒ¨
        async function collapseAll(collapseId) {
            const collapse = document.getElementById(collapseId);
            if (collapse && collapse.collapseAll) {
                await collapse.collapseAll();
                updateStatus(collapseId, 'å·²æ”¶èµ·å…¨éƒ¨é¢æ¿');
            }
        }
        
        // åˆ‡æ¢æŒ‡å®šé¢æ¿
        async function togglePanel(collapseId, panelName) {
            const collapse = document.getElementById(collapseId);
            if (collapse && collapse.togglePanel) {
                await collapse.togglePanel(panelName);
                updateStatus(collapseId, `å·²åˆ‡æ¢é¢æ¿: ${panelName}`);
            }
        }
        
        // è·å–å±•å¼€çš„é¢æ¿
        async function getOpenPanels(collapseId) {
            const collapse = document.getElementById(collapseId);
            if (collapse && collapse.getOpenPanels) {
                const openPanels = await collapse.getOpenPanels();
                updateStatus(collapseId, `å½“å‰å±•å¼€çš„é¢æ¿: ${openPanels.length > 0 ? openPanels.join(', ') : 'æ— '}`);
            }
        }
        
        // åˆ‡æ¢æ‹–æ‹½æ¨¡å¼
        function toggleSortable() {
            const collapse = document.getElementById('collapse2');
            if (collapse) {
                collapse.sortable = !collapse.sortable;
                document.getElementById('status2').textContent = `æ‹–æ‹½æ¨¡å¼: ${collapse.sortable ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}`;
            }
        }
        
        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus(collapseId, message) {
            const statusMap = {
                'collapse1': 'status1',
                'collapse2': 'status2',
                'collapse3': 'status3'
            };
            const statusEl = document.getElementById(statusMap[collapseId]);
            if (statusEl) {
                statusEl.textContent = `çŠ¶æ€: ${message}`;
            }
        }
        
        // ç›‘å¬äº‹ä»¶
        document.addEventListener('DOMContentLoaded', () => {
            // ç›‘å¬å±•å¼€/æ”¶èµ·äº‹ä»¶
            const collapses = document.querySelectorAll('ldesign-collapse');
            collapses.forEach(collapse => {
                collapse.addEventListener('ldesignChange', (e) => {
                    console.log('å±•å¼€é¡¹å˜åŒ–:', e.detail);
                });
                
                collapse.addEventListener('ldesignExpandAll', (e) => {
                    console.log('å±•å¼€å…¨éƒ¨:', e.detail);
                });
                
                collapse.addEventListener('ldesignCollapseAll', (e) => {
                    console.log('æ”¶èµ·å…¨éƒ¨');
                });
                
                collapse.addEventListener('ldesignSortChange', (e) => {
                    console.log('æ’åºå˜åŒ–:', e.detail);
                    updateStatus('collapse2', `æ’åºå˜åŒ–: ${e.detail.panelName} ä»ä½ç½® ${e.detail.from} ç§»åˆ° ${e.detail.to}`);
                });
            });
        });
    </script>
</body>
</html>