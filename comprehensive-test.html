<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ˜å é¢æ¿ç»¼åˆåŠŸèƒ½æµ‹è¯•</title>
    <script type="module" src="./dist/ldesign/ldesign.esm.js"></script>
    <link rel="stylesheet" href="./dist/ldesign/ldesign.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #333;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .btn-secondary {
            background: #48bb78;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #38a169;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: #ed8936;
            color: white;
        }
        
        .btn-warning:hover {
            background: #dd6b20;
            transform: translateY(-2px);
        }
        
        .btn-info {
            background: #4299e1;
            color: white;
        }
        
        .btn-info:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }
        
        .status-box {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
        }
        
        .status-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .status-content {
            color: #4a5568;
            line-height: 1.6;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid #667eea;
        }
        
        .feature-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2d3748;
        }
        
        .feature-description {
            color: #718096;
            font-size: 14px;
        }
        
        /* è‡ªå®šä¹‰æŠ˜å é¢æ¿æ ·å¼ */
        ldesign-collapse {
            margin-top: 20px;
        }
        
        ldesign-collapse-panel {
            margin-bottom: 10px;
        }
        
        .panel-content {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            line-height: 1.6;
        }
        
        .drag-hint {
            background: #fff5f5;
            border: 1px dashed #fc8181;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 15px;
            color: #c53030;
            font-size: 14px;
        }
        
        .log-container {
            max-height: 200px;
            overflow-y: auto;
            background: #1a202c;
            color: #68d391;
            padding: 10px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-top: 10px;
        }
        
        .log-entry {
            margin-bottom: 4px;
            padding: 2px 0;
        }
        
        .log-time {
            color: #4299e1;
            margin-right: 8px;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(102, 126, 234, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0);
            }
        }
        
        .highlight {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ æŠ˜å é¢æ¿ç»¼åˆåŠŸèƒ½æµ‹è¯•</h1>
        
        <!-- åŸºç¡€åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h2 class="section-title">ğŸ“‹ åŸºç¡€åŠŸèƒ½æµ‹è¯•</h2>
            
            <div class="controls">
                <button class="btn btn-primary" onclick="expandAll()">å±•å¼€å…¨éƒ¨</button>
                <button class="btn btn-warning" onclick="collapseAll()">æ”¶èµ·å…¨éƒ¨</button>
                <button class="btn btn-secondary" onclick="togglePanel('panel2')">åˆ‡æ¢é¢æ¿2</button>
                <button class="btn btn-info" onclick="getOpenStatus()">è·å–å±•å¼€çŠ¶æ€</button>
            </div>
            
            <ldesign-collapse id="basicCollapse" accordion="false">
                <ldesign-collapse-panel name="panel1" title="é¢æ¿ 1 - åŸºç¡€å†…å®¹" icon-rotation="90">
                    <div class="panel-content">
                        <p>è¿™æ˜¯ç¬¬ä¸€ä¸ªé¢æ¿çš„å†…å®¹ã€‚</p>
                        <p>å›¾æ ‡æ—‹è½¬è§’åº¦ï¼š90åº¦</p>
                        <p>ç‚¹å‡»æ ‡é¢˜å¯ä»¥å±•å¼€/æ”¶èµ·é¢æ¿</p>
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="panel2" title="é¢æ¿ 2 - å›¾æ ‡æ—‹è½¬180åº¦" icon-rotation="180">
                    <div class="panel-content">
                        <p>è¿™ä¸ªé¢æ¿çš„å›¾æ ‡æ—‹è½¬è§’åº¦ä¸º180åº¦ã€‚</p>
                        <p>æ³¨æ„è§‚å¯Ÿå›¾æ ‡çš„æ—‹è½¬åŠ¨ç”»æ•ˆæœã€‚</p>
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="panel3" title="é¢æ¿ 3 - å›¾æ ‡æ—‹è½¬45åº¦" icon-rotation="45">
                    <div class="panel-content">
                        <p>è¿™ä¸ªé¢æ¿çš„å›¾æ ‡æ—‹è½¬è§’åº¦ä¸º45åº¦ã€‚</p>
                        <p>é€‚åˆç‰¹æ®Šçš„UIè®¾è®¡éœ€æ±‚ã€‚</p>
                    </div>
                </ldesign-collapse-panel>
            </ldesign-collapse>
            
            <div class="status-box">
                <div class="status-title">çŠ¶æ€ä¿¡æ¯ï¼š</div>
                <div class="status-content" id="statusInfo">ç­‰å¾…æ“ä½œ...</div>
            </div>
        </div>
        
        <!-- æ‹–æ‹½æ’åºæµ‹è¯• -->
        <div class="test-section">
            <h2 class="section-title">ğŸ”„ æ‹–æ‹½æ’åºåŠŸèƒ½</h2>
            
            <div class="drag-hint">
                ğŸ’¡ æç¤ºï¼šæ‹–åŠ¨é¢æ¿æ ‡é¢˜æ å¯ä»¥é‡æ–°æ’åºï¼ˆéœ€è¦å¼€å¯ sortable å±æ€§ï¼‰
            </div>
            
            <div class="controls">
                <button class="btn btn-primary" onclick="toggleSortable()">åˆ‡æ¢æ‹–æ‹½çŠ¶æ€</button>
                <button class="btn btn-secondary" onclick="resetOrder()">é‡ç½®é¡ºåº</button>
            </div>
            
            <ldesign-collapse id="sortableCollapse" sortable="true">
                <ldesign-collapse-panel name="item1" title="ğŸ è‹¹æœ - å¯æ‹–æ‹½" icon-rotation="90">
                    <div class="panel-content">
                        è‹¹æœæ˜¯ä¸€ç§è¥å…»ä¸°å¯Œçš„æ°´æœï¼Œå«æœ‰ä¸°å¯Œçš„ç»´ç”Ÿç´ å’ŒçŸ¿ç‰©è´¨ã€‚
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="item2" title="ğŸŠ æ©™å­ - å¯æ‹–æ‹½" icon-rotation="90">
                    <div class="panel-content">
                        æ©™å­å¯Œå«ç»´ç”Ÿç´ Cï¼Œå¯¹æé«˜å…ç–«åŠ›å¾ˆæœ‰å¸®åŠ©ã€‚
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="item3" title="ğŸŒ é¦™è•‰ - å¯æ‹–æ‹½" icon-rotation="90">
                    <div class="panel-content">
                        é¦™è•‰å«æœ‰ä¸°å¯Œçš„é’¾å…ƒç´ ï¼Œæ˜¯è¿åŠ¨åçš„ç†æƒ³é£Ÿç‰©ã€‚
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="item4" title="ğŸ‡ è‘¡è„ - å¯æ‹–æ‹½" icon-rotation="90">
                    <div class="panel-content">
                        è‘¡è„å«æœ‰æŠ—æ°§åŒ–ç‰©è´¨ï¼Œå¯¹å¿ƒè¡€ç®¡å¥åº·æœ‰ç›Šã€‚
                    </div>
                </ldesign-collapse-panel>
            </ldesign-collapse>
            
            <div class="log-container" id="dragLog">
                <div class="log-entry">ç­‰å¾…æ‹–æ‹½æ“ä½œ...</div>
            </div>
        </div>
        
        <!-- åµŒå¥—é¢æ¿æµ‹è¯• -->
        <div class="test-section">
            <h2 class="section-title">ğŸ—‚ï¸ åµŒå¥—é¢æ¿æµ‹è¯•</h2>
            
            <ldesign-collapse id="nestedCollapse">
                <ldesign-collapse-panel name="parent1" title="çˆ¶çº§é¢æ¿ 1" icon-rotation="90">
                    <div class="panel-content">
                        <p>è¿™æ˜¯çˆ¶çº§é¢æ¿çš„å†…å®¹</p>
                        
                        <ldesign-collapse>
                            <ldesign-collapse-panel name="child1" title="å­é¢æ¿ 1-1" icon-rotation="45">
                                <div class="panel-content">å­é¢æ¿1-1çš„å†…å®¹</div>
                            </ldesign-collapse-panel>
                            
                            <ldesign-collapse-panel name="child2" title="å­é¢æ¿ 1-2" icon-rotation="45">
                                <div class="panel-content">å­é¢æ¿1-2çš„å†…å®¹</div>
                            </ldesign-collapse-panel>
                        </ldesign-collapse>
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="parent2" title="çˆ¶çº§é¢æ¿ 2" icon-rotation="90">
                    <div class="panel-content">
                        <p>å¦ä¸€ä¸ªçˆ¶çº§é¢æ¿</p>
                        
                        <ldesign-collapse>
                            <ldesign-collapse-panel name="child3" title="å­é¢æ¿ 2-1" icon-rotation="45">
                                <div class="panel-content">
                                    æ›´æ·±å±‚çš„åµŒå¥—ï¼š
                                    <ldesign-collapse>
                                        <ldesign-collapse-panel name="grandchild1" title="å­™é¢æ¿" icon-rotation="270">
                                            <div class="panel-content">è¿™æ˜¯ç¬¬ä¸‰å±‚åµŒå¥—çš„å†…å®¹</div>
                                        </ldesign-collapse-panel>
                                    </ldesign-collapse>
                                </div>
                            </ldesign-collapse-panel>
                        </ldesign-collapse>
                    </div>
                </ldesign-collapse-panel>
            </ldesign-collapse>
        </div>
        
        <!-- æ‰‹é£ç´æ¨¡å¼æµ‹è¯• -->
        <div class="test-section">
            <h2 class="section-title">ğŸ¹ æ‰‹é£ç´æ¨¡å¼</h2>
            
            <p style="color: #718096; margin-bottom: 15px;">
                æ‰‹é£ç´æ¨¡å¼ä¸‹ï¼ŒåŒæ—¶åªèƒ½å±•å¼€ä¸€ä¸ªé¢æ¿
            </p>
            
            <ldesign-collapse accordion="true">
                <ldesign-collapse-panel name="accordion1" title="é€‰é¡¹ A" icon-rotation="90">
                    <div class="panel-content">
                        åœ¨æ‰‹é£ç´æ¨¡å¼ä¸‹ï¼Œæ‰“å¼€æ­¤é¢æ¿ä¼šè‡ªåŠ¨å…³é—­å…¶ä»–é¢æ¿ã€‚
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="accordion2" title="é€‰é¡¹ B" icon-rotation="90">
                    <div class="panel-content">
                        ç‚¹å‡»æ­¤é¢æ¿ï¼Œé€‰é¡¹ A ä¼šè‡ªåŠ¨æ”¶èµ·ã€‚
                    </div>
                </ldesign-collapse-panel>
                
                <ldesign-collapse-panel name="accordion3" title="é€‰é¡¹ C" icon-rotation="90">
                    <div class="panel-content">
                        è¿™ç§æ¨¡å¼é€‚åˆåœ¨æœ‰é™ç©ºé—´å†…å±•ç¤ºå†…å®¹ã€‚
                    </div>
                </ldesign-collapse-panel>
            </ldesign-collapse>
        </div>
        
        <!-- åŠŸèƒ½ç‰¹æ€§è¯´æ˜ -->
        <div class="test-section">
            <h2 class="section-title">âœ¨ å·²å®ç°çš„åŠŸèƒ½ç‰¹æ€§</h2>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-title">ğŸ¨ å¹³æ»‘åŠ¨ç”»</div>
                    <div class="feature-description">
                        é¢æ¿å±•å¼€/æ”¶èµ·æ—¶æœ‰å¹³æ»‘çš„é«˜åº¦è¿‡æ¸¡åŠ¨ç”»ï¼Œå›¾æ ‡æ—‹è½¬åŠ¨ç”»æµç•…æ— æŠ–åŠ¨ã€‚
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">ğŸ”„ å¤šè§’åº¦æ—‹è½¬</div>
                    <div class="feature-description">
                        æ”¯æŒ45Â°ã€90Â°ã€180Â°ã€270Â°ç­‰å¤šç§å›¾æ ‡æ—‹è½¬è§’åº¦é…ç½®ã€‚
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">ğŸ“¦ æ‰¹é‡æ“ä½œ</div>
                    <div class="feature-description">
                        æ”¯æŒå±•å¼€å…¨éƒ¨ã€æ”¶èµ·å…¨éƒ¨ã€åˆ‡æ¢æŒ‡å®šé¢æ¿ç­‰æ‰¹é‡æ“ä½œæ–¹æ³•ã€‚
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">ğŸ¯ æ‹–æ‹½æ’åº</div>
                    <div class="feature-description">
                        å¯ç”¨sortableå±æ€§åï¼Œå¯é€šè¿‡æ‹–æ‹½é¢æ¿æ ‡é¢˜æ¥é‡æ–°æ’åºã€‚
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">ğŸ—‚ï¸ åµŒå¥—æ”¯æŒ</div>
                    <div class="feature-description">
                        æ”¯æŒå¤šå±‚åµŒå¥—ï¼Œæ¯å±‚ç‹¬ç«‹æ§åˆ¶ï¼Œäº’ä¸å¹²æ‰°ã€‚
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">ğŸ¹ æ‰‹é£ç´æ¨¡å¼</div>
                    <div class="feature-description">
                        å¯ç”¨accordionå±æ€§åï¼ŒåŒæ—¶åªèƒ½å±•å¼€ä¸€ä¸ªé¢æ¿ã€‚
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // åŸºç¡€åŠŸèƒ½
        async function expandAll() {
            const collapse = document.getElementById('basicCollapse');
            await collapse.expandAll();
            updateStatus('å·²å±•å¼€æ‰€æœ‰é¢æ¿');
        }
        
        async function collapseAll() {
            const collapse = document.getElementById('basicCollapse');
            await collapse.collapseAll();
            updateStatus('å·²æ”¶èµ·æ‰€æœ‰é¢æ¿');
        }
        
        async function togglePanel(panelName) {
            const collapse = document.getElementById('basicCollapse');
            await collapse.togglePanel(panelName);
            updateStatus(`å·²åˆ‡æ¢é¢æ¿: ${panelName}`);
        }
        
        async function getOpenStatus() {
            const collapse = document.getElementById('basicCollapse');
            const openPanels = await collapse.getOpenPanels();
            updateStatus(`å½“å‰å±•å¼€çš„é¢æ¿: ${openPanels.length > 0 ? openPanels.join(', ') : 'æ— '}`);
        }
        
        function updateStatus(message) {
            const statusDiv = document.getElementById('statusInfo');
            const time = new Date().toLocaleTimeString('zh-CN');
            statusDiv.innerHTML = `[${time}] ${message}`;
            statusDiv.parentElement.classList.add('highlight');
            setTimeout(() => {
                statusDiv.parentElement.classList.remove('highlight');
            }, 2000);
        }
        
        // æ‹–æ‹½æ’åºåŠŸèƒ½
        let sortableEnabled = true;
        function toggleSortable() {
            const collapse = document.getElementById('sortableCollapse');
            sortableEnabled = !sortableEnabled;
            collapse.setAttribute('sortable', sortableEnabled);
            addDragLog(`æ‹–æ‹½åŠŸèƒ½å·²${sortableEnabled ? 'å¯ç”¨' : 'ç¦ç”¨'}`);
        }
        
        function resetOrder() {
            const collapse = document.getElementById('sortableCollapse');
            const panels = Array.from(collapse.querySelectorAll('ldesign-collapse-panel'));
            
            // æŒ‰åŸå§‹é¡ºåºæ’åº
            panels.sort((a, b) => {
                const aName = a.getAttribute('name');
                const bName = b.getAttribute('name');
                return aName.localeCompare(bName);
            });
            
            // é‡æ–°æ’å…¥DOM
            panels.forEach(panel => collapse.appendChild(panel));
            addDragLog('é¢æ¿é¡ºåºå·²é‡ç½®');
        }
        
        function addDragLog(message) {
            const logContainer = document.getElementById('dragLog');
            const time = new Date().toLocaleTimeString('zh-CN');
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `<span class="log-time">[${time}]</span> ${message}`;
            
            // ä¿æŒæœ€æ–°çš„æ—¥å¿—åœ¨é¡¶éƒ¨
            if (logContainer.firstChild) {
                logContainer.insertBefore(logEntry, logContainer.firstChild);
            } else {
                logContainer.appendChild(logEntry);
            }
            
            // é™åˆ¶æ—¥å¿—æ•°é‡
            while (logContainer.children.length > 10) {
                logContainer.removeChild(logContainer.lastChild);
            }
        }
        
        // ç›‘å¬æ‹–æ‹½äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            const sortableCollapse = document.getElementById('sortableCollapse');
            
            // ç›‘å¬æ‹–æ‹½å¼€å§‹
            sortableCollapse.addEventListener('dragstart', (e) => {
                if (e.target.tagName === 'LDESIGN-COLLAPSE-PANEL') {
                    const panelName = e.target.getAttribute('name');
                    const title = e.target.getAttribute('title');
                    addDragLog(`å¼€å§‹æ‹–æ‹½: ${title}`);
                }
            });
            
            // ç›‘å¬æ‹–æ‹½ç»“æŸ
            sortableCollapse.addEventListener('dragend', (e) => {
                if (e.target.tagName === 'LDESIGN-COLLAPSE-PANEL') {
                    addDragLog('æ‹–æ‹½ç»“æŸ');
                }
            });
            
            // ç›‘å¬æ”¾ç½®äº‹ä»¶
            sortableCollapse.addEventListener('drop', (e) => {
                addDragLog('é¢æ¿é¡ºåºå·²æ›´æ–°');
            });
            
            // ç›‘å¬æ‰€æœ‰æŠ˜å é¢æ¿çš„å±•å¼€/æ”¶èµ·äº‹ä»¶
            document.querySelectorAll('ldesign-collapse').forEach(collapse => {
                collapse.addEventListener('change', (e) => {
                    console.log('é¢æ¿çŠ¶æ€å˜åŒ–:', e.detail);
                });
            });
            
            // åˆå§‹åŒ–çŠ¶æ€
            updateStatus('é¡µé¢å·²åŠ è½½ï¼Œæ‰€æœ‰åŠŸèƒ½å°±ç»ª');
            addDragLog('æ‹–æ‹½åŠŸèƒ½å·²å¯ç”¨ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•');
        });
    </script>
</body>
</html>