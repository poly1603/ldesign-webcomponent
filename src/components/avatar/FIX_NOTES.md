# Avatar 组件修复说明

## 🔧 修复内容

### 1. 徽标被裁剪问题
**问题**：徽标（badge）和状态指示器（status）被 `overflow: hidden` 裁剪

**解决方案**：
- 将 `.ldesign-avatar` 的 `overflow: hidden` 改为 `overflow: visible`
- 给 `&__img` 添加 `border-radius: inherit` 确保图片仍然有圆角
- 徽标位置使用负偏移（-6px）让其显示在头像外面
- 状态指示器位置使用负偏移（-2px）

### 2. 保持原有功能
- ✅ 文字自动缩放功能保持不变
- ✅ 所有尺寸（small/medium/large）正常工作
- ✅ 图标头像正常工作
- ✅ 图片头像正常工作
- ✅ 响应式尺寸正常工作
- ✅ 所有新增功能（clickable、border、loading等）正常工作

## 📝 改动文件

### avatar.less
- 第 16 行：`overflow: hidden` → `overflow: visible`
- 第 76 行：给 `&__img` 添加 `border-radius: inherit`
- 第 122-144 行：徽标位置使用 `-6px` 偏移
- 第 164-166 行：状态点位置使用 `-2px` 偏移

### 没有改动
- ✅ avatar.tsx - 逻辑完全保持不变
- ✅ avatar-group.tsx - 无改动
- ✅ avatar-group.less - 无改动

## ✅ 测试要点

1. **徽标显示**
   - 红点徽标应完全显示，不被裁剪
   - 数字徽标应完全显示，不被裁剪
   - 四个角落的徽标位置都正确

2. **图片圆角**
   - 圆形头像仍然是圆的
   - 方形头像仍然有圆角
   - 图片不会溢出头像边界

3. **文字自动缩放**
   - 长文本应该自动缩小
   - 短文本保持正常大小
   - Gap 参数正常工作

4. **状态指示器**
   - 状态点应该完全显示
   - 位置在右下角
   - 不同尺寸的状态点大小正确

## 🎯 核心原理

通过将容器的 `overflow` 改为 `visible`，徽标和状态点可以显示在容器外面，同时给图片元素添加圆角继承，确保图片本身仍然被裁剪成圆形或圆角矩形。

这是一个最小化的改动，不影响任何现有功能。
