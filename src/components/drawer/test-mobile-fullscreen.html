<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ç§»åŠ¨ç«¯å…¨å±æ¨¡å¼æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 22px;
            margin-bottom: 10px;
            color: #333;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .test-section h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #555;
        }
        
        .test-section p {
            font-size: 13px;
            color: #666;
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .btn {
            width: 100%;
            padding: 14px;
            margin: 8px 0;
            font-size: 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #52c41a 0%, #73d13d 100%);
            box-shadow: 0 4px 12px rgba(82, 196, 26, 0.3);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #faad14 0%, #ffc53d 100%);
            box-shadow: 0 4px 12px rgba(250, 173, 20, 0.3);
        }
        
        .btn-danger {
            background: #dc3545;
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
        }
        
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 12px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 13px;
            line-height: 1.6;
        }
        
        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 12px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 13px;
            line-height: 1.6;
        }
        
        .check-list {
            list-style: none;
            padding: 0;
            margin: 15px 0;
        }
        
        .check-list li {
            padding: 8px 0 8px 30px;
            position: relative;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .check-list li:before {
            content: "âœ“";
            position: absolute;
            left: 8px;
            color: #28a745;
            font-weight: bold;
            font-size: 16px;
        }
        
        .drawer-fullscreen-content {
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 100%;
        }
        
        .drawer-fullscreen-content h2 {
            font-size: 28px;
            margin-bottom: 20px;
            color: #333;
        }
        
        .drawer-fullscreen-content p {
            font-size: 16px;
            line-height: 1.8;
            color: #666;
            margin-bottom: 15px;
            max-width: 600px;
        }
        
        .fullscreen-demo {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
        
        .fullscreen-demo h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #555;
        }
        
        .dimension-display {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.8;
        }
        
        .dimension-display .label {
            color: #666;
            display: inline-block;
            width: 150px;
        }
        
        .dimension-display .value {
            color: #333;
            font-weight: bold;
        }
        
        .dimension-display .pass {
            color: #28a745;
        }
        
        .dimension-display .fail {
            color: #dc3545;
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .test-section {
                padding: 12px;
            }
            
            .btn {
                padding: 12px;
                font-size: 14px;
            }
        }
    </style>
    <script type="module" src="../../../dist/ldesign.js"></script>
</head>
<body>
    <div class="container">
        <h1>ğŸ–¼ï¸ ç§»åŠ¨ç«¯å…¨å±æ¨¡å¼æµ‹è¯•</h1>
        <p class="subtitle">
            éªŒè¯æŠ½å±‰å…¨å±æ¨¡å¼åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ­£ç¡®é“ºæ»¡æ•´ä¸ªå±å¹•<br>
            è¯·åœ¨çœŸå®ç§»åŠ¨è®¾å¤‡æˆ–æµè§ˆå™¨æ¨¡æ‹Ÿå™¨ä¸Šæµ‹è¯•
        </p>
        
        <div class="info-box">
            <strong>ğŸ“± å½“å‰è§†å£ï¼š</strong><br>
            å®½åº¦: <span id="vw-width"></span>px | 
            é«˜åº¦: <span id="vw-height"></span>px
        </div>
        
        <div class="test-section">
            <h3>æµ‹è¯• 1: å³ä¾§å…¨å±æŠ½å±‰</h3>
            <p>é¢„æœŸï¼šå®Œå…¨é“ºæ»¡æ•´ä¸ªå±å¹•ï¼Œæ— è¾¹è·ï¼Œæ— åœ†è§’</p>
            <button class="btn" onclick="openDrawer('right-fullscreen')">
                æ‰“å¼€å³ä¾§å…¨å±æŠ½å±‰
            </button>
        </div>
        
        <div class="test-section">
            <h3>æµ‹è¯• 2: å·¦ä¾§å…¨å±æŠ½å±‰</h3>
            <p>é¢„æœŸï¼šå®Œå…¨é“ºæ»¡æ•´ä¸ªå±å¹•</p>
            <button class="btn btn-success" onclick="openDrawer('left-fullscreen')">
                æ‰“å¼€å·¦ä¾§å…¨å±æŠ½å±‰
            </button>
        </div>
        
        <div class="test-section">
            <h3>æµ‹è¯• 3: åº•éƒ¨å…¨å±æŠ½å±‰</h3>
            <p>é¢„æœŸï¼šå®Œå…¨é“ºæ»¡æ•´ä¸ªå±å¹•</p>
            <button class="btn btn-warning" onclick="openDrawer('bottom-fullscreen')">
                æ‰“å¼€åº•éƒ¨å…¨å±æŠ½å±‰
            </button>
        </div>
        
        <div class="test-section">
            <h3>æµ‹è¯• 4: é¡¶éƒ¨å…¨å±æŠ½å±‰</h3>
            <p>é¢„æœŸï¼šå®Œå…¨é“ºæ»¡æ•´ä¸ªå±å¹•</p>
            <button class="btn" onclick="openDrawer('top-fullscreen')">
                æ‰“å¼€é¡¶éƒ¨å…¨å±æŠ½å±‰
            </button>
        </div>
        
        <div class="test-section">
            <h3>å¯¹æ¯”æµ‹è¯•: éå…¨å±å³ä¾§æŠ½å±‰</h3>
            <p>é¢„æœŸï¼šå æ® 85% å®½åº¦ï¼Œæœ‰åœ†è§’</p>
            <button class="btn" onclick="openDrawer('right-normal')">
                æ‰“å¼€æ™®é€šå³ä¾§æŠ½å±‰ (85%)
            </button>
        </div>
        
        <div class="success-box">
            <strong>âœ… å…¨å±æ¨¡å¼æ£€æŸ¥æ¸…å•ï¼š</strong>
            <ul class="check-list">
                <li>æŠ½å±‰å®½åº¦ = å±å¹•å®½åº¦ (100vw)</li>
                <li>æŠ½å±‰é«˜åº¦ = å±å¹•é«˜åº¦ (100vh)</li>
                <li>æ— è¾¹è·ï¼Œå››è¾¹å®Œå…¨å¯¹é½å±å¹•è¾¹ç¼˜</li>
                <li>æ— åœ†è§’ï¼ˆborder-radius: 0ï¼‰</li>
                <li>é®ç½©å±‚å®Œå…¨è¦†ç›–</li>
                <li>å…³é—­æŒ‰é’®å¯è§ä¸”å¯ç‚¹å‡»</li>
                <li>å†…å®¹åŒºåŸŸå¯æ»šåŠ¨</li>
            </ul>
        </div>
        
        <button class="btn btn-danger" onclick="closeAllDrawers()">
            ğŸ”’ å…³é—­æ‰€æœ‰æŠ½å±‰
        </button>
    </div>
    
    <!-- å³ä¾§å…¨å±æŠ½å±‰ -->
    <ldesign-drawer 
        id="drawer-right-fullscreen"
        placement="right" 
        fullscreen="true"
        drawer-title="å³ä¾§å…¨å±æŠ½å±‰"
        closable="true"
        mask-closable="true">
        <div class="drawer-fullscreen-content">
            <h2>ğŸ–¼ï¸ å…¨å±æ¨¡å¼</h2>
            <p>è¿™æ˜¯ä¸€ä¸ªå…¨å±æŠ½å±‰ï¼Œåº”è¯¥å®Œå…¨é“ºæ»¡æ•´ä¸ªå±å¹•ã€‚</p>
            
            <div class="fullscreen-demo">
                <h3>å°ºå¯¸éªŒè¯</h3>
                <div class="dimension-display" id="fullscreen-info-right">
                    æ­£åœ¨æ£€æµ‹...
                </div>
            </div>
            
            <p>è¯·æ£€æŸ¥ï¼š</p>
            <p>âœ“ æŠ½å±‰æ˜¯å¦é“ºæ»¡æ•´ä¸ªå±å¹•ï¼Ÿ<br>
               âœ“ å››å‘¨æ˜¯å¦æœ‰è¾¹è·æˆ–ç©ºéš™ï¼Ÿ<br>
               âœ“ åœ†è§’æ˜¯å¦è¢«æ­£ç¡®ç§»é™¤ï¼Ÿ<br>
               âœ“ å†…å®¹æ˜¯å¦å¯ä»¥æ­£å¸¸æ»šåŠ¨ï¼Ÿ</p>
        </div>
    </ldesign-drawer>
    
    <!-- å·¦ä¾§å…¨å±æŠ½å±‰ -->
    <ldesign-drawer 
        id="drawer-left-fullscreen"
        placement="left" 
        fullscreen="true"
        drawer-title="å·¦ä¾§å…¨å±æŠ½å±‰"
        closable="true"
        mask-closable="true">
        <div class="drawer-fullscreen-content">
            <h2>ğŸ“± å·¦ä¾§å…¨å±</h2>
            <p>è¿™æ˜¯ä¸€ä¸ªä»å·¦ä¾§æ»‘å…¥çš„å…¨å±æŠ½å±‰ã€‚</p>
            
            <div class="fullscreen-demo">
                <h3>å°ºå¯¸éªŒè¯</h3>
                <div class="dimension-display" id="fullscreen-info-left">
                    æ­£åœ¨æ£€æµ‹...
                </div>
            </div>
            
            <p>åº”è¯¥å®Œå…¨å æ®å±å¹•ï¼Œä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹ã€‚</p>
        </div>
    </ldesign-drawer>
    
    <!-- åº•éƒ¨å…¨å±æŠ½å±‰ -->
    <ldesign-drawer 
        id="drawer-bottom-fullscreen"
        placement="bottom" 
        fullscreen="true"
        drawer-title="åº•éƒ¨å…¨å±æŠ½å±‰"
        closable="true"
        mask-closable="true">
        <div class="drawer-fullscreen-content">
            <h2>â¬†ï¸ åº•éƒ¨å…¨å±</h2>
            <p>è¿™æ˜¯ä¸€ä¸ªä»åº•éƒ¨æ»‘å…¥çš„å…¨å±æŠ½å±‰ã€‚</p>
            
            <div class="fullscreen-demo">
                <h3>å°ºå¯¸éªŒè¯</h3>
                <div class="dimension-display" id="fullscreen-info-bottom">
                    æ­£åœ¨æ£€æµ‹...
                </div>
            </div>
            
            <p>åœ¨ç§»åŠ¨ç«¯ï¼Œåº•éƒ¨æŠ½å±‰çš„å…¨å±æ¨¡å¼ç‰¹åˆ«æœ‰ç”¨ï¼Œ<br>
               å¯ä»¥å®ç°ç±»ä¼¼åŸç”Ÿ App çš„å…¨å±é¡µé¢æ•ˆæœã€‚</p>
        </div>
    </ldesign-drawer>
    
    <!-- é¡¶éƒ¨å…¨å±æŠ½å±‰ -->
    <ldesign-drawer 
        id="drawer-top-fullscreen"
        placement="top" 
        fullscreen="true"
        drawer-title="é¡¶éƒ¨å…¨å±æŠ½å±‰"
        closable="true"
        mask-closable="true">
        <div class="drawer-fullscreen-content">
            <h2>â¬‡ï¸ é¡¶éƒ¨å…¨å±</h2>
            <p>è¿™æ˜¯ä¸€ä¸ªä»é¡¶éƒ¨æ»‘å…¥çš„å…¨å±æŠ½å±‰ã€‚</p>
            
            <div class="fullscreen-demo">
                <h3>å°ºå¯¸éªŒè¯</h3>
                <div class="dimension-display" id="fullscreen-info-top">
                    æ­£åœ¨æ£€æµ‹...
                </div>
            </div>
            
            <p>å…¨å±æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ä½ç½®çš„æŠ½å±‰éƒ½åº”è¯¥è¡¨ç°ä¸€è‡´ã€‚</p>
        </div>
    </ldesign-drawer>
    
    <!-- æ™®é€šå³ä¾§æŠ½å±‰ï¼ˆå¯¹æ¯”ï¼‰ -->
    <ldesign-drawer 
        id="drawer-right-normal"
        placement="right" 
        size="85%"
        drawer-title="æ™®é€šå³ä¾§æŠ½å±‰ (85%)"
        closable="true"
        mask-closable="true">
        <div class="drawer-fullscreen-content">
            <h2>ğŸ“ æ™®é€šæ¨¡å¼ï¼ˆå¯¹æ¯”ï¼‰</h2>
            <p>è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„å³ä¾§æŠ½å±‰ï¼Œå®½åº¦ä¸º 85%ã€‚</p>
            
            <div class="fullscreen-demo">
                <h3>å°ºå¯¸å¯¹æ¯”</h3>
                <div class="dimension-display" id="fullscreen-info-normal">
                    æ­£åœ¨æ£€æµ‹...
                </div>
            </div>
            
            <p>ä¸å…¨å±æŠ½å±‰å¯¹æ¯”ï¼š<br>
               â€¢ å®½åº¦åº”è¯¥æ˜¯ 85% è€Œä¸æ˜¯ 100%<br>
               â€¢ åº”è¯¥æœ‰åœ†è§’<br>
               â€¢ å·¦ä¾§åº”è¯¥æœ‰ç©ºéš™</p>
        </div>
    </ldesign-drawer>
    
    <script>
        // æ›´æ–°è§†å£ä¿¡æ¯
        function updateViewportInfo() {
            document.getElementById('vw-width').textContent = window.innerWidth;
            document.getElementById('vw-height').textContent = window.innerHeight;
        }
        
        // æ£€æŸ¥æŠ½å±‰å°ºå¯¸
        function checkDrawerDimensions(drawer, infoElementId) {
            setTimeout(() => {
                const wrapper = drawer.shadowRoot.querySelector('.drawer-wrapper');
                if (!wrapper) return;
                
                const rect = wrapper.getBoundingClientRect();
                const computedStyle = window.getComputedStyle(wrapper);
                
                const actualWidth = rect.width;
                const actualHeight = rect.height;
                const viewportWidth = window.innerWidth;
                const viewportHeight = window.innerHeight;
                
                const widthMatch = Math.abs(actualWidth - viewportWidth) < 2;
                const heightMatch = Math.abs(actualHeight - viewportHeight) < 2;
                const borderRadius = computedStyle.borderRadius;
                
                const isFullscreen = drawer.hasAttribute('fullscreen') && drawer.getAttribute('fullscreen') !== 'false';
                
                let html = '';
                
                if (isFullscreen) {
                    html = `
                        <div class="label">å®é™…å®½åº¦:</div>
                        <span class="value ${widthMatch ? 'pass' : 'fail'}">
                            ${actualWidth.toFixed(1)}px ${widthMatch ? 'âœ“' : 'âœ—'}
                        </span><br>
                        
                        <div class="label">è§†å£å®½åº¦:</div>
                        <span class="value">${viewportWidth}px</span><br>
                        
                        <div class="label">å®é™…é«˜åº¦:</div>
                        <span class="value ${heightMatch ? 'pass' : 'fail'}">
                            ${actualHeight.toFixed(1)}px ${heightMatch ? 'âœ“' : 'âœ—'}
                        </span><br>
                        
                        <div class="label">è§†å£é«˜åº¦:</div>
                        <span class="value">${viewportHeight}px</span><br>
                        
                        <div class="label">åœ†è§’:</div>
                        <span class="value ${borderRadius === '0px' ? 'pass' : 'fail'}">
                            ${borderRadius} ${borderRadius === '0px' ? 'âœ“' : 'âœ—'}
                        </span><br>
                        
                        <div class="label">å·¦è¾¹è·:</div>
                        <span class="value ${Math.abs(rect.left) < 1 ? 'pass' : 'fail'}">
                            ${rect.left.toFixed(1)}px ${Math.abs(rect.left) < 1 ? 'âœ“' : 'âœ—'}
                        </span><br>
                        
                        <div class="label">é¡¶è¾¹è·:</div>
                        <span class="value ${Math.abs(rect.top) < 1 ? 'pass' : 'fail'}">
                            ${rect.top.toFixed(1)}px ${Math.abs(rect.top) < 1 ? 'âœ“' : 'âœ—'}
                        </span><br>
                        
                        <div class="label">å…¨å±æ£€æµ‹:</div>
                        <span class="value ${widthMatch && heightMatch && borderRadius === '0px' ? 'pass' : 'fail'}">
                            ${widthMatch && heightMatch && borderRadius === '0px' ? 'âœ… é€šè¿‡' : 'âŒ æœªé€šè¿‡'}
                        </span>
                    `;
                } else {
                    html = `
                        <div class="label">å®é™…å®½åº¦:</div>
                        <span class="value">${actualWidth.toFixed(1)}px</span><br>
                        
                        <div class="label">è§†å£å®½åº¦:</div>
                        <span class="value">${viewportWidth}px</span><br>
                        
                        <div class="label">å®½åº¦å æ¯”:</div>
                        <span class="value">${(actualWidth / viewportWidth * 100).toFixed(1)}%</span><br>
                        
                        <div class="label">åœ†è§’:</div>
                        <span class="value">${borderRadius}</span><br>
                        
                        <div class="label">å·¦è¾¹è·:</div>
                        <span class="value">${rect.left.toFixed(1)}px</span>
                    `;
                }
                
                document.getElementById(infoElementId).innerHTML = html;
                
                // æ§åˆ¶å°æ—¥å¿—
                console.log(`[Drawer ${drawer.id}]`, {
                    fullscreen: isFullscreen,
                    actualWidth,
                    actualHeight,
                    viewportWidth,
                    viewportHeight,
                    widthMatch,
                    heightMatch,
                    borderRadius,
                    rect: {
                        left: rect.left,
                        top: rect.top,
                        right: rect.right,
                        bottom: rect.bottom
                    }
                });
                
                // æç¤ºé—®é¢˜
                if (isFullscreen && (!widthMatch || !heightMatch || borderRadius !== '0px')) {
                    console.error(`âŒ å…¨å±æ¨¡å¼é—®é¢˜æ£€æµ‹ [${drawer.id}]:`, {
                        widthProblem: !widthMatch,
                        heightProblem: !heightMatch,
                        borderRadiusProblem: borderRadius !== '0px'
                    });
                }
            }, 500);
        }
        
        // æ‰“å¼€æŒ‡å®šæŠ½å±‰
        async function openDrawer(type) {
            const drawerMap = {
                'right-fullscreen': { id: 'drawer-right-fullscreen', info: 'fullscreen-info-right' },
                'left-fullscreen': { id: 'drawer-left-fullscreen', info: 'fullscreen-info-left' },
                'bottom-fullscreen': { id: 'drawer-bottom-fullscreen', info: 'fullscreen-info-bottom' },
                'top-fullscreen': { id: 'drawer-top-fullscreen', info: 'fullscreen-info-top' },
                'right-normal': { id: 'drawer-right-normal', info: 'fullscreen-info-normal' }
            };
            
            const config = drawerMap[type];
            if (!config) return;
            
            const drawer = document.getElementById(config.id);
            if (drawer) {
                await drawer.open();
                checkDrawerDimensions(drawer, config.info);
            }
        }
        
        // å…³é—­æ‰€æœ‰æŠ½å±‰
        async function closeAllDrawers() {
            const drawers = document.querySelectorAll('ldesign-drawer');
            for (const drawer of drawers) {
                await drawer.close();
            }
        }
        
        // åˆå§‹åŒ–
        updateViewportInfo();
        
        // ç›‘å¬çª—å£å¤§å°å˜åŒ–
        window.addEventListener('resize', updateViewportInfo);
        
        // ç›‘å¬æ–¹å‘å˜åŒ–
        window.addEventListener('orientationchange', () => {
            setTimeout(updateViewportInfo, 100);
        });
        
        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        window.addEventListener('load', () => {
            console.log('%cç§»åŠ¨ç«¯å…¨å±æ¨¡å¼æµ‹è¯•', 'font-size: 16px; font-weight: bold; color: #667eea;');
            console.log('è¯·æ‰“å¼€ä¸åŒçš„å…¨å±æŠ½å±‰ï¼Œæ£€æŸ¥æ˜¯å¦å®Œå…¨é“ºæ»¡å±å¹•ã€‚');
        });
    </script>
</body>
</html>
