/**
 * æ»šåŠ¨æ¡è¡¥å¿ CSS å¢å¼º
 * @description æä¾›å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœï¼Œå‡å°‘è§†è§‰è·³åŠ¨
 */

/* 
 * æ³¨æ„ï¼šè¿™äº› CSS è¿‡æ¸¡æ˜¯å¯é€‰çš„
 * åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´åŠ¨ç”»ä¸åŒæ­¥ï¼Œå»ºè®®æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´
 */

/* é»˜è®¤ç¦ç”¨è¿‡æ¸¡ï¼Œé€šè¿‡ JS åŠ¨æ€å¯ç”¨ */
body {
  /* ä¸è®¾ç½®é»˜è®¤è¿‡æ¸¡ï¼Œé¿å…å½±å“å…¶ä»–æ ·å¼å˜åŒ– */
}

/* å½“å¯ç”¨å¹³æ»‘è¡¥å¿æ—¶ï¼ˆé€šè¿‡æ·»åŠ  classï¼‰ */
body.smooth-scrollbar-compensation {
  transition: padding-right 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* å›ºå®šå…ƒç´ çš„å¹³æ»‘è¿‡æ¸¡ */
[data-scroll-compensated="true"] {
  transition: 
    padding-right 0.2s cubic-bezier(0.4, 0, 0.2, 1),
    margin-right 0.2s cubic-bezier(0.4, 0, 0.2, 1),
    right 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* æ‰‹åŠ¨æ ‡è®°çš„å›ºå®šå…ƒç´  */
[data-fixed-compensate] {
  /* é¢„ç•™ï¼Œç­‰å¾…è¡¥å¿æ—¶åº”ç”¨è¿‡æ¸¡ */
}

[data-fixed-compensate].compensating {
  transition: 
    padding-right 0.2s cubic-bezier(0.4, 0, 0.2, 1),
    margin-right 0.2s cubic-bezier(0.4, 0, 0.2, 1),
    right 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ç¦ç”¨åŠ¨ç”»çš„ç±»ï¼ˆç”¨äºå¿«é€Ÿåˆ‡æ¢ï¼‰ */
.no-scrollbar-transition,
.no-scrollbar-transition * {
  transition: none !important;
}

/* è°ƒè¯•æ¨¡å¼ï¼šé«˜äº®è¢«è¡¥å¿çš„å…ƒç´  */
body.scrollbar-compensation-debug [data-scroll-compensated="true"] {
  outline: 2px dashed rgba(255, 0, 0, 0.5);
  outline-offset: -2px;
}

body.scrollbar-compensation-debug [data-scroll-compensated="true"]::before {
  content: 'å·²è¡¥å¿';
  position: absolute;
  top: 0;
  right: 0;
  background: rgba(255, 0, 0, 0.8);
  color: white;
  padding: 2px 6px;
  font-size: 10px;
  font-weight: bold;
  z-index: 99999;
  pointer-events: none;
}

/* é¡µé¢é”å®šçŠ¶æ€æŒ‡ç¤ºå™¨ */
body[data-scroll-locked] {
  /* å¯ä»¥æ·»åŠ è‡ªå®šä¹‰æ ·å¼ */
}

body[data-scroll-locked]::after {
  /* å¯é€‰ï¼šæ·»åŠ é”å®šçŠ¶æ€çš„è§†è§‰æç¤º */
  /* content: 'ğŸ”’'; */
  /* position: fixed; */
  /* top: 10px; */
  /* right: 10px; */
  /* z-index: 99999; */
}

/* æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘é‡ç»˜ */
[data-scroll-compensated="true"] {
  will-change: padding-right, margin-right, right;
  contain: layout style;
}

/* ç§»é™¤ will-changeï¼ˆè¡¥å¿ç»“æŸåï¼‰ */
[data-scroll-compensated="false"],
body:not([data-scroll-lock-count]) [data-scroll-compensated="true"] {
  will-change: auto;
}

/* å“åº”å¼å¤„ç† */
@media (max-width: 768px) {
  /* ç§»åŠ¨è®¾å¤‡é€šå¸¸æ²¡æœ‰æ»šåŠ¨æ¡ï¼Œå¯ä»¥ç¦ç”¨è¿‡æ¸¡ */
  body.smooth-scrollbar-compensation {
    transition: none;
  }
  
  [data-scroll-compensated="true"] {
    transition: none;
  }
}

/* æ‰“å°æ—¶ç§»é™¤è¡¥å¿ */
@media print {
  body {
    padding-right: 0 !important;
  }
  
  [data-scroll-compensated="true"] {
    padding-right: revert !important;
    margin-right: revert !important;
    right: revert !important;
  }
}

/* é«˜å¯¹æ¯”åº¦æ¨¡å¼æ”¯æŒ */
@media (prefers-contrast: high) {
  body.scrollbar-compensation-debug [data-scroll-compensated="true"] {
    outline-color: rgba(255, 0, 0, 1);
    outline-width: 3px;
  }
}

/* åŠ¨ç”»å‡å¼±æ¨¡å¼æ”¯æŒ */
@media (prefers-reduced-motion: reduce) {
  body.smooth-scrollbar-compensation,
  [data-scroll-compensated="true"],
  [data-fixed-compensate].compensating {
    transition: none !important;
  }
}

/* æ·±è‰²æ¨¡å¼æ”¯æŒ */
@media (prefers-color-scheme: dark) {
  body.scrollbar-compensation-debug [data-scroll-compensated="true"]::before {
    background: rgba(255, 100, 100, 0.9);
  }
}

/* 
 * å·¥å…·ç±»
 */

/* å¼ºåˆ¶å¯ç”¨å¹³æ»‘è¡¥å¿ */
.force-smooth-scrollbar-compensation {
  transition: padding-right 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.force-smooth-scrollbar-compensation * {
  transition: 
    padding-right 0.2s cubic-bezier(0.4, 0, 0.2, 1),
    margin-right 0.2s cubic-bezier(0.4, 0, 0.2, 1),
    right 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* å¼ºåˆ¶ç¦ç”¨è¡¥å¿è¿‡æ¸¡ */
.disable-scrollbar-compensation-transition,
.disable-scrollbar-compensation-transition * {
  transition: none !important;
}

/* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ï¼ˆå¯é€‰ï¼‰ */
.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #555;
}

/* Firefox */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: #888 #f1f1f1;
}

/*
 * åŠ¨ç”»å…³é”®å¸§ï¼ˆå¯é€‰ï¼‰
 */

@keyframes scrollbar-compensation-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* è¡¥å¿è¿‡ç¨‹ä¸­çš„è„‰å†²åŠ¨ç”»ï¼ˆè°ƒè¯•ç”¨ï¼‰ */
body.scrollbar-compensation-debug [data-scroll-compensated="true"] {
  animation: scrollbar-compensation-pulse 1s ease-in-out infinite;
}
