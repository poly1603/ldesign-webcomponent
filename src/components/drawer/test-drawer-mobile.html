<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>LDesign Drawer - ç§»åŠ¨ç«¯æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: env(safe-area-inset-top, 20px) env(safe-area-inset-right, 20px) env(safe-area-inset-bottom, 20px) env(safe-area-inset-left, 20px);
            color: #333;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #333;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .section {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #444;
            border-bottom: 2px solid #eee;
            padding-bottom: 8px;
        }
        
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }
        
        .btn {
            display: inline-block;
            padding: 14px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .btn.btn-secondary {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }
        
        .btn.btn-success {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
        }
        
        .btn.btn-warning {
            background: linear-gradient(135deg, #fa709a, #fee140);
        }
        
        .device-info {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #666;
        }
        
        .device-info div {
            margin-bottom: 5px;
        }
        
        .device-info strong {
            color: #333;
        }
        
        .gesture-hint {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .gesture-hint-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #1976d2;
        }
        
        .test-content {
            padding: 20px;
        }
        
        .test-content h3 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .test-content p {
            line-height: 1.6;
            color: #666;
            margin-bottom: 10px;
        }
        
        .scroll-content {
            height: 300px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
        }
        
        .scroll-item {
            padding: 10px;
            margin-bottom: 10px;
            background: #f5f5f5;
            border-radius: 6px;
        }
        
        /* æ·±è‰²æ¨¡å¼æ”¯æŒ */
        @media (prefers-color-scheme: dark) {
            body {
                background: linear-gradient(135deg, #434343 0%, #000000 100%);
            }
            
            .container {
                background: #1e1e1e;
                color: #e0e0e0;
            }
            
            h1, .section-title, .test-content h3 {
                color: #e0e0e0;
            }
            
            .subtitle, .test-content p, .device-info {
                color: #b0b0b0;
            }
            
            .device-info {
                background: #2a2a2a;
            }
            
            .device-info strong {
                color: #e0e0e0;
            }
            
            .gesture-hint {
                background: #1e3a5f;
                border-left-color: #64b5f6;
            }
            
            .gesture-hint-title {
                color: #90caf9;
            }
            
            .scroll-content {
                border-color: #444;
                background: #1a1a1a;
            }
            
            .scroll-item {
                background: #2a2a2a;
                color: #e0e0e0;
            }
        }
        
        /* æ¨ªå±ä¼˜åŒ– */
        @media (orientation: landscape) and (max-width: 1024px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .button-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“± æŠ½å±‰ç»„ä»¶ç§»åŠ¨ç«¯æµ‹è¯•</h1>
        <p class="subtitle">æµ‹è¯•è§¦æ‘¸æ‰‹åŠ¿ã€å“åº”å¼å¸ƒå±€å’Œç§»åŠ¨ç«¯ä¼˜åŒ–</p>
        
        <!-- è®¾å¤‡ä¿¡æ¯ -->
        <div class="device-info">
            <div><strong>è®¾å¤‡ç±»å‹ï¼š</strong><span id="deviceType">æ£€æµ‹ä¸­...</span></div>
            <div><strong>å±å¹•å°ºå¯¸ï¼š</strong><span id="screenSize">æ£€æµ‹ä¸­...</span></div>
            <div><strong>è§¦æ‘¸æ”¯æŒï¼š</strong><span id="touchSupport">æ£€æµ‹ä¸­...</span></div>
            <div><strong>å±å¹•æ–¹å‘ï¼š</strong><span id="orientation">æ£€æµ‹ä¸­...</span></div>
        </div>
        
        <!-- æ‰‹åŠ¿æç¤º -->
        <div class="gesture-hint">
            <div class="gesture-hint-title">ğŸ’¡ æ”¯æŒçš„æ‰‹åŠ¿æ“ä½œï¼š</div>
            <div>â€¢ å·¦å³æ»‘åŠ¨æ‰“å¼€/å…³é—­ä¾§è¾¹æŠ½å±‰</div>
            <div>â€¢ ä¸Šä¸‹æ»‘åŠ¨æ‰“å¼€/å…³é—­é¡¶éƒ¨/åº•éƒ¨æŠ½å±‰</div>
            <div>â€¢ æ‹–åŠ¨è¾¹ç¼˜è°ƒæ•´æŠ½å±‰å¤§å°ï¼ˆå¦‚æœå¯ç”¨ï¼‰</div>
            <div>â€¢ ç‚¹å‡»é®ç½©å…³é—­æŠ½å±‰</div>
        </div>
        
        <!-- æ–¹å‘æµ‹è¯• -->
        <div class="section">
            <h2 class="section-title">ğŸ“ æ–¹å‘æµ‹è¯•</h2>
            <div class="button-grid">
                <button class="btn" onclick="openDrawer('left')">å·¦ä¾§æŠ½å±‰</button>
                <button class="btn btn-secondary" onclick="openDrawer('right')">å³ä¾§æŠ½å±‰</button>
                <button class="btn btn-success" onclick="openDrawer('top')">é¡¶éƒ¨æŠ½å±‰</button>
                <button class="btn btn-warning" onclick="openDrawer('bottom')">åº•éƒ¨æŠ½å±‰</button>
            </div>
        </div>
        
        <!-- æ‰‹åŠ¿æµ‹è¯• -->
        <div class="section">
            <h2 class="section-title">ğŸ‘† æ‰‹åŠ¿åŠŸèƒ½æµ‹è¯•</h2>
            <div class="button-grid">
                <button class="btn" onclick="openSwipeDrawer()">æ»‘åŠ¨å…³é—­æµ‹è¯•</button>
                <button class="btn btn-secondary" onclick="openResizableDrawer()">æ‹–åŠ¨è°ƒæ•´å¤§å°</button>
                <button class="btn btn-success" onclick="openPullDownDrawer()">ä¸‹æ‹‰å…³é—­(åº•éƒ¨)</button>
            </div>
        </div>
        
        <!-- å“åº”å¼æµ‹è¯• -->
        <div class="section">
            <h2 class="section-title">ğŸ“ å“åº”å¼å¸ƒå±€æµ‹è¯•</h2>
            <div class="button-grid">
                <button class="btn" onclick="openFullscreenDrawer()">å…¨å±æŠ½å±‰</button>
                <button class="btn btn-secondary" onclick="openCustomSizeDrawer()">è‡ªå®šä¹‰å°ºå¯¸</button>
                <button class="btn btn-success" onclick="openScrollableDrawer()">æ»šåŠ¨å†…å®¹æµ‹è¯•</button>
            </div>
        </div>
        
        <!-- æ€§èƒ½æµ‹è¯• -->
        <div class="section">
            <h2 class="section-title">âš¡ æ€§èƒ½æµ‹è¯•</h2>
            <div class="button-grid">
                <button class="btn" onclick="openPerformanceDrawer()">æ€§èƒ½æ¨¡å¼</button>
                <button class="btn btn-secondary" onclick="testMultipleDrawers()">å¤šæŠ½å±‰æµ‹è¯•</button>
                <button class="btn btn-warning" onclick="testAnimationPerformance()">åŠ¨ç”»æ€§èƒ½æµ‹è¯•</button>
            </div>
        </div>
    </div>
    
    <!-- å·¦ä¾§æŠ½å±‰ -->
    <ldesign-drawer id="leftDrawer" placement="left" drawerTitle="å·¦ä¾§æŠ½å±‰" swipeable>
        <div class="test-content">
            <h3>å·¦ä¾§æŠ½å±‰å†…å®¹</h3>
            <p>è¿™æ˜¯ä¸€ä¸ªå·¦ä¾§æŠ½å±‰çš„ç¤ºä¾‹ã€‚æ”¯æŒä»å³å‘å·¦æ»‘åŠ¨å…³é—­ã€‚</p>
            <p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼ŒæŠ½å±‰ä¼šè‡ªåŠ¨é€‚é…å±å¹•å®½åº¦ã€‚</p>
            <button class="btn" onclick="document.getElementById('leftDrawer').visible = false">å…³é—­æŠ½å±‰</button>
        </div>
    </ldesign-drawer>
    
    <!-- å³ä¾§æŠ½å±‰ -->
    <ldesign-drawer id="rightDrawer" placement="right" drawerTitle="å³ä¾§æŠ½å±‰" swipeable>
        <div class="test-content">
            <h3>å³ä¾§æŠ½å±‰å†…å®¹</h3>
            <p>è¿™æ˜¯ä¸€ä¸ªå³ä¾§æŠ½å±‰çš„ç¤ºä¾‹ã€‚æ”¯æŒä»å·¦å‘å³æ»‘åŠ¨å…³é—­ã€‚</p>
            <button class="btn" onclick="document.getElementById('rightDrawer').visible = false">å…³é—­æŠ½å±‰</button>
        </div>
    </ldesign-drawer>
    
    <!-- é¡¶éƒ¨æŠ½å±‰ -->
    <ldesign-drawer id="topDrawer" placement="top" drawerTitle="é¡¶éƒ¨æŠ½å±‰" height="auto">
        <div class="test-content">
            <h3>é¡¶éƒ¨æŠ½å±‰å†…å®¹</h3>
            <p>è¿™æ˜¯ä¸€ä¸ªé¡¶éƒ¨æŠ½å±‰çš„ç¤ºä¾‹ã€‚é«˜åº¦è‡ªé€‚åº”å†…å®¹ã€‚</p>
            <button class="btn" onclick="document.getElementById('topDrawer').visible = false">å…³é—­æŠ½å±‰</button>
        </div>
    </ldesign-drawer>
    
    <!-- åº•éƒ¨æŠ½å±‰ -->
    <ldesign-drawer id="bottomDrawer" placement="bottom" drawerTitle="åº•éƒ¨æŠ½å±‰" swipeable swipeThreshold="50">
        <div class="test-content">
            <h3>åº•éƒ¨æŠ½å±‰å†…å®¹</h3>
            <p>è¿™æ˜¯ä¸€ä¸ªåº•éƒ¨æŠ½å±‰çš„ç¤ºä¾‹ã€‚æ”¯æŒå‘ä¸‹æ»‘åŠ¨å…³é—­ã€‚</p>
            <p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç‰¹åˆ«é€‚åˆæ“ä½œé¢æ¿åœºæ™¯ã€‚</p>
            <div class="button-grid">
                <button class="btn">æ“ä½œ1</button>
                <button class="btn btn-secondary">æ“ä½œ2</button>
            </div>
        </div>
    </ldesign-drawer>
    
    <!-- å¯è°ƒæ•´å¤§å°çš„æŠ½å±‰ -->
    <ldesign-drawer id="resizableDrawer" placement="right" drawerTitle="å¯è°ƒæ•´å¤§å°" resizable swipeable>
        <div class="test-content">
            <h3>å¯è°ƒæ•´å¤§å°çš„æŠ½å±‰</h3>
            <p>æ‹–åŠ¨å·¦è¾¹ç¼˜å¯ä»¥è°ƒæ•´æŠ½å±‰å®½åº¦ã€‚</p>
            <p>åŒæ—¶æ”¯æŒæ»‘åŠ¨å…³é—­ã€‚</p>
        </div>
    </ldesign-drawer>
    
    <!-- å…¨å±æŠ½å±‰ -->
    <ldesign-drawer id="fullscreenDrawer" placement="right" drawerTitle="å…¨å±æŠ½å±‰" fullscreen>
        <div class="test-content">
            <h3>å…¨å±æŠ½å±‰</h3>
            <p>è¿™æ˜¯ä¸€ä¸ªå…¨å±æŠ½å±‰ï¼Œå æ®æ•´ä¸ªå±å¹•ã€‚</p>
            <p>é€‚åˆéœ€è¦æœ€å¤§åŒ–æ˜¾ç¤ºå†…å®¹çš„åœºæ™¯ã€‚</p>
            <button class="btn" onclick="document.getElementById('fullscreenDrawer').visible = false">å…³é—­æŠ½å±‰</button>
        </div>
    </ldesign-drawer>
    
    <!-- æ»šåŠ¨å†…å®¹æŠ½å±‰ -->
    <ldesign-drawer id="scrollableDrawer" placement="bottom" drawerTitle="æ»šåŠ¨å†…å®¹æµ‹è¯•" height="70%" swipeable>
        <div class="test-content">
            <h3>æ»šåŠ¨å†…å®¹æµ‹è¯•</h3>
            <p>æµ‹è¯•å†…å®¹åŒºåŸŸçš„æ»šåŠ¨æ€§èƒ½å’Œè§¦æ‘¸æ»šåŠ¨ä½“éªŒã€‚</p>
            <div class="scroll-content">
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 1</div>
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 2</div>
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 3</div>
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 4</div>
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 5</div>
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 6</div>
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 7</div>
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 8</div>
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 9</div>
                <div class="scroll-item">æ»šåŠ¨é¡¹ç›® 10</div>
            </div>
        </div>
    </ldesign-drawer>
    
    <!-- æ€§èƒ½æ¨¡å¼æŠ½å±‰ -->
    <ldesign-drawer id="performanceDrawer" placement="right" drawerTitle="æ€§èƒ½æ¨¡å¼æµ‹è¯•" enablePerformanceMode>
        <div class="test-content">
            <h3>æ€§èƒ½æ¨¡å¼å·²å¯ç”¨</h3>
            <p>æ­¤æŠ½å±‰å¯ç”¨äº†æ€§èƒ½ä¼˜åŒ–æ¨¡å¼ï¼š</p>
            <ul>
                <li>GPU ç¡¬ä»¶åŠ é€Ÿ</li>
                <li>CSS Containment</li>
                <li>è¢«åŠ¨äº‹ä»¶ç›‘å¬å™¨</li>
                <li>ä¼˜åŒ–çš„åŠ¨ç”»</li>
            </ul>
        </div>
    </ldesign-drawer>
    
    <script type="module">
        // å¯¼å…¥æŠ½å±‰ç»„ä»¶
        import './drawer.js';
        
        // æ£€æµ‹è®¾å¤‡ä¿¡æ¯
        function detectDevice() {
            const deviceType = document.getElementById('deviceType');
            const screenSize = document.getElementById('screenSize');
            const touchSupport = document.getElementById('touchSupport');
            const orientation = document.getElementById('orientation');
            
            // è®¾å¤‡ç±»å‹
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const isTablet = /(iPad|tablet|playbook|silk)|(android(?!.*mobile))/i.test(navigator.userAgent);
            
            if (isTablet) {
                deviceType.textContent = 'å¹³æ¿è®¾å¤‡';
            } else if (isMobile) {
                deviceType.textContent = 'ç§»åŠ¨è®¾å¤‡';
            } else {
                deviceType.textContent = 'æ¡Œé¢è®¾å¤‡';
            }
            
            // å±å¹•å°ºå¯¸
            screenSize.textContent = `${window.innerWidth} Ã— ${window.innerHeight}`;
            
            // è§¦æ‘¸æ”¯æŒ
            touchSupport.textContent = 'ontouchstart' in window ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ';
            
            // å±å¹•æ–¹å‘
            function updateOrientation() {
                orientation.textContent = window.innerWidth > window.innerHeight ? 'æ¨ªå±' : 'ç«–å±';
            }
            updateOrientation();
            window.addEventListener('resize', updateOrientation);
        }
        
        detectDevice();
        
        // å…¨å±€å‡½æ•°
        window.openDrawer = function(placement) {
            const drawer = document.getElementById(placement + 'Drawer');
            if (drawer) {
                drawer.visible = true;
            }
        };
        
        window.openSwipeDrawer = function() {
            const drawer = document.getElementById('rightDrawer');
            drawer.visible = true;
            setTimeout(() => {
                alert('å°è¯•ä»å·¦å‘å³æ»‘åŠ¨å…³é—­æŠ½å±‰');
            }, 500);
        };
        
        window.openResizableDrawer = function() {
            const drawer = document.getElementById('resizableDrawer');
            drawer.visible = true;
        };
        
        window.openPullDownDrawer = function() {
            const drawer = document.getElementById('bottomDrawer');
            drawer.visible = true;
            setTimeout(() => {
                alert('å°è¯•å‘ä¸‹æ‹–åŠ¨å…³é—­åº•éƒ¨æŠ½å±‰');
            }, 500);
        };
        
        window.openFullscreenDrawer = function() {
            const drawer = document.getElementById('fullscreenDrawer');
            drawer.visible = true;
        };
        
        window.openCustomSizeDrawer = function() {
            const drawer = document.getElementById('bottomDrawer');
            drawer.height = '60%';
            drawer.visible = true;
        };
        
        window.openScrollableDrawer = function() {
            const drawer = document.getElementById('scrollableDrawer');
            drawer.visible = true;
        };
        
        window.openPerformanceDrawer = function() {
            const drawer = document.getElementById('performanceDrawer');
            drawer.visible = true;
        };
        
        window.testMultipleDrawers = function() {
            // åŒæ—¶æ‰“å¼€å¤šä¸ªæŠ½å±‰æµ‹è¯•æ€§èƒ½
            setTimeout(() => document.getElementById('leftDrawer').visible = true, 0);
            setTimeout(() => document.getElementById('bottomDrawer').visible = true, 200);
            setTimeout(() => {
                alert('å·²æ‰“å¼€å¤šä¸ªæŠ½å±‰ï¼Œæµ‹è¯•æ¸²æŸ“æ€§èƒ½');
            }, 500);
        };
        
        window.testAnimationPerformance = function() {
            const drawer = document.getElementById('rightDrawer');
            let count = 0;
            const interval = setInterval(() => {
                drawer.visible = !drawer.visible;
                count++;
                if (count >= 6) {
                    clearInterval(interval);
                }
            }, 400);
        };
        
        // ç›‘å¬æŠ½å±‰äº‹ä»¶
        document.addEventListener('DOMContentLoaded', () => {
            const drawers = document.querySelectorAll('ldesign-drawer');
            drawers.forEach(drawer => {
                drawer.addEventListener('drawerOpen', (e) => {
                    console.log('æŠ½å±‰æ‰“å¼€:', e.detail);
                });
                
                drawer.addEventListener('drawerClose', (e) => {
                    console.log('æŠ½å±‰å…³é—­:', e.detail);
                });
                
                drawer.addEventListener('drawerResize', (e) => {
                    console.log('æŠ½å±‰è°ƒæ•´å¤§å°:', e.detail);
                });
            });
        });
        
        // ç›‘å¬é”®ç›˜é«˜åº¦å˜åŒ–ï¼ˆè™šæ‹Ÿé”®ç›˜ï¼‰
        if ('visualViewport' in window) {
            window.visualViewport.addEventListener('resize', () => {
                const keyboardHeight = window.innerHeight - window.visualViewport.height;
                document.documentElement.style.setProperty('--keyboard-height', keyboardHeight + 'px');
            });
        }
    </script>
</body>
</html>