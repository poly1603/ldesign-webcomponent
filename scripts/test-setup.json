{
  "scripts": {
    "// === 单元测试 ===": "",
    "test": "npm run test:unit && npm run test:e2e",
    "test:unit": "stencil test --spec",
    "test:unit:watch": "stencil test --spec --watchAll",
    "test:coverage": "stencil test --spec --coverage",
    
    "// === E2E 测试 ===": "",
    "test:e2e": "playwright test -c playwright.config.e2e.ts",
    "test:e2e:chromium": "playwright test -c playwright.config.e2e.ts --project=chromium",
    "test:e2e:firefox": "playwright test -c playwright.config.e2e.ts --project=firefox",
    "test:e2e:webkit": "playwright test -c playwright.config.e2e.ts --project=webkit",
    "test:e2e:debug": "playwright test -c playwright.config.e2e.ts --debug",
    "test:e2e:ui": "playwright test -c playwright.config.e2e.ts --ui",
    
    "// === 性能测试 ===": "",
    "test:performance": "playwright test performance/performance.test.ts",
    "test:performance:report": "playwright test performance/performance.test.ts --reporter=html",
    
    "// === 可访问性测试 ===": "",
    "test:a11y": "playwright test a11y/*.a11y.ts",
    
    "// === 视觉回归测试 ===": "",
    "test:visual": "playwright test visual/*.visual.ts",
    "test:visual:update": "playwright test visual/*.visual.ts --update-snapshots",
    
    "// === 测试工具 ===": "",
    "test:debug": "node --inspect-brk node_modules/.bin/stencil test --spec --no-cache",
    "test:report": "open-cli coverage/lcov-report/index.html",
    
    "// === Playwright 工具 ===": "",
    "playwright:install": "playwright install",
    "playwright:codegen": "playwright codegen",
    
    "// === CI/CD ===": "",
    "ci:test": "npm run lint && npm run type-check && npm run test:unit && npm run test:e2e",
    "ci:test:full": "npm run ci:test && npm run test:performance && npm run test:a11y",
    
    "// === 其他 ===": "",
    "lint": "eslint src/**/*.{ts,tsx}",
    "type-check": "tsc --noEmit",
    "format:check": "prettier --check \"src/**/*.{ts,tsx,css,less}\"",
    "size-check": "size-limit"
  },
  
  "devDependencies": {
    "@playwright/test": "^1.40.0",
    "@size-limit/preset-app": "^10.0.0",
    "@stencil/core": "^4.0.0",
    "@types/jest": "^29.5.0",
    "jest": "^29.5.0",
    "jest-cli": "^29.5.0",
    "puppeteer": "^21.0.0",
    "size-limit": "^10.0.0"
  },
  
  "size-limit": [
    {
      "name": "AutoComplete",
      "path": "dist/components/auto-complete.js",
      "limit": "15 KB"
    },
    {
      "name": "Select",
      "path": "dist/components/select.js",
      "limit": "20 KB"
    },
    {
      "name": "Form",
      "path": "dist/components/form.js",
      "limit": "18 KB"
    },
    {
      "name": "Table",
      "path": "dist/components/table.js",
      "limit": "25 KB"
    },
    {
      "name": "Full Bundle",
      "path": "dist/ldesign-webcomponent.esm.js",
      "limit": "150 KB"
    }
  ],
  
  "jest": {
    "preset": "@stencil/core/testing",
    "collectCoverageFrom": [
      "src/**/*.{ts,tsx}",
      "!src/**/*.spec.{ts,tsx}",
      "!src/**/*.e2e.{ts,tsx}",
      "!src/**/test/**"
    ],
    "coverageThreshold": {
      "global": {
        "branches": 80,
        "functions": 80,
        "lines": 80,
        "statements": 80
      }
    },
    "testPathIgnorePatterns": [
      "/node_modules/",
      "/dist/",
      "/e2e/"
    ]
  }
}
