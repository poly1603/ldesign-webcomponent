<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>移动端 Drawer 测试</title>
  <script type="module" src="/src/index.ts"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      color: #333;
      margin-top: 0;
    }
    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
    }
    ldesign-button {
      flex: 1;
      min-width: 140px;
    }
    .drawer-content {
      padding: 20px;
      background: #f5f5f5;
      min-height: 300px;
    }
    .drawer-content h3 {
      margin-top: 0;
      color: #666;
    }
    .drawer-content p {
      color: #999;
      line-height: 1.6;
    }
    .debug-info {
      margin-top: 20px;
      padding: 10px;
      background: #f0f0f0;
      border-radius: 4px;
      font-size: 12px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>移动端 Drawer 测试</h1>
    
    <div class="debug-info">
      <div>用户代理: <span id="userAgent"></span></div>
      <div>视口宽度: <span id="viewportWidth"></span></div>
      <div>设备类型: <span id="deviceType"></span></div>
    </div>

    <div class="btn-group">
      <ldesign-button type="primary" onclick="openDrawer('left')">左侧抽屉</ldesign-button>
      <ldesign-button type="primary" onclick="openDrawer('right')">右侧抽屉</ldesign-button>
      <ldesign-button type="primary" onclick="openDrawer('top')">顶部抽屉</ldesign-button>
      <ldesign-button type="primary" onclick="openDrawer('bottom')">底部抽屉</ldesign-button>
    </div>

    <div class="btn-group">
      <ldesign-button type="success" onclick="openDrawer('left', '80%')">左侧 80%</ldesign-button>
      <ldesign-button type="success" onclick="openDrawer('right', '300px')">右侧 300px</ldesign-button>
      <ldesign-button type="warning" onclick="openDrawer('top', '50vh')">顶部 50vh</ldesign-button>
      <ldesign-button type="warning" onclick="openDrawer('bottom', '400px')">底部 400px</ldesign-button>
    </div>
  </div>

  <!-- 左侧抽屉 -->
  <ldesign-drawer id="leftDrawer" placement="left" drawer-title="左侧抽屉" size="70%">
    <div class="drawer-content">
      <h3>左侧抽屉内容</h3>
      <p>这是一个从左侧滑出的抽屉。</p>
      <p>默认宽度: 70%</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    </div>
  </ldesign-drawer>

  <!-- 右侧抽屉 -->
  <ldesign-drawer id="rightDrawer" placement="right" drawer-title="右侧抽屉" size="70%">
    <div class="drawer-content">
      <h3>右侧抽屉内容</h3>
      <p>这是一个从右侧滑出的抽屉。</p>
      <p>默认宽度: 70%</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    </div>
  </ldesign-drawer>

  <!-- 顶部抽屉 -->
  <ldesign-drawer id="topDrawer" placement="top" drawer-title="顶部抽屉" size="300px">
    <div class="drawer-content">
      <h3>顶部抽屉内容</h3>
      <p>这是一个从顶部滑出的抽屉。</p>
      <p>默认高度: 300px</p>
    </div>
  </ldesign-drawer>

  <!-- 底部抽屉 -->
  <ldesign-drawer id="bottomDrawer" placement="bottom" drawer-title="底部抽屉" size="50%">
    <div class="drawer-content">
      <h3>底部抽屉内容</h3>
      <p>这是一个从底部滑出的抽屉。</p>
      <p>默认高度: 50%</p>
    </div>
  </ldesign-drawer>

  <script>
    // 显示调试信息
    document.getElementById('userAgent').textContent = navigator.userAgent.substring(0, 50) + '...';
    document.getElementById('viewportWidth').textContent = window.innerWidth + 'px';
    
    // 检测是否为移动设备
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    document.getElementById('deviceType').textContent = isMobile ? '移动设备' : 'PC设备';
    
    // 监听窗口大小变化
    window.addEventListener('resize', () => {
      document.getElementById('viewportWidth').textContent = window.innerWidth + 'px';
    });

    function openDrawer(placement, size) {
      const drawer = document.getElementById(placement + 'Drawer');
      if (size) {
        drawer.size = size;
      }
      drawer.open();
      
      // 调试：打印drawer的计算样式
      setTimeout(() => {
        const panel = drawer.shadowRoot?.querySelector('.ldesign-drawer__panel') || 
                     drawer.querySelector('.ldesign-drawer__panel');
        if (panel) {
          const computedStyle = window.getComputedStyle(panel);
          console.log(`${placement} drawer panel styles:`, {
            width: computedStyle.width,
            height: computedStyle.height,
            transform: computedStyle.transform,
            background: computedStyle.background,
            position: computedStyle.position,
            display: computedStyle.display
          });
        }
      }, 100);
    }
  </script>
</body>
</html>